#include "opencv2/opencv.hpp"

int main(){
  cv::VideoCapture cap(1);
  if(!cap.isOpened()){
    return -1;
  }

  cv::Mat frame;
  cap >> frame;
  //std::cout << frame;
  cv::imwrite("frame.png", frame);

  cv::Mat binary;
  cv::Mat lowerBound(frame.size(), CV_8UC3, cv::Scalar(0,0,240));
  cv::Mat upperBound(frame.size(), CV_8UC3, cv::Scalar(255,255,255));
  inRange(frame, lowerBound, upperBound, binary);
  cv::imwrite("binary.png", binary);

  std::vector<std::vector<cv::Point> > contours;
  cv::findContours(binary, contours, cv::noArray(), CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);
  
  cv::Mat contourIm(frame.size(),CV_8UC3,cv::Scalar(0,0,0));
  for(int i = 0; i < contours.size(); i++){
    std::cout << contours[i] << '\n';
    cv::drawContours(contourIm, contours, i, cv::Scalar(0,0,255));
  }
  cv::imwrite("contour.png", contourIm);
}
